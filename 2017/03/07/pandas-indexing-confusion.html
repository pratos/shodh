<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Pandas Indexing &amp; Selecting using iloc, loc and ix | prthamesh’s blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Pandas Indexing &amp; Selecting using iloc, loc and ix" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In Pandas 19.02, the indexing follows the same paradigms as Numpy. There’s not much of a difference if a newbie starts to slice pandas Dataframe according to the numpy conventions. However, there comes a time when things take turn for the worse when he/she encounters the three musketeers: iloc, loc and ix." />
<meta property="og:description" content="In Pandas 19.02, the indexing follows the same paradigms as Numpy. There’s not much of a difference if a newbie starts to slice pandas Dataframe according to the numpy conventions. However, there comes a time when things take turn for the worse when he/she encounters the three musketeers: iloc, loc and ix." />
<link rel="canonical" href="https://pratos.github.io/2017/03/07/pandas-indexing-confusion.html" />
<meta property="og:url" content="https://pratos.github.io/2017/03/07/pandas-indexing-confusion.html" />
<meta property="og:site_name" content="prthamesh’s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-03-07T00:00:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Pandas Indexing &amp; Selecting using iloc, loc and ix" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2017-03-07T00:00:00-06:00","datePublished":"2017-03-07T00:00:00-06:00","description":"In Pandas 19.02, the indexing follows the same paradigms as Numpy. There’s not much of a difference if a newbie starts to slice pandas Dataframe according to the numpy conventions. However, there comes a time when things take turn for the worse when he/she encounters the three musketeers: iloc, loc and ix.","headline":"Pandas Indexing &amp; Selecting using iloc, loc and ix","mainEntityOfPage":{"@type":"WebPage","@id":"https://pratos.github.io/2017/03/07/pandas-indexing-confusion.html"},"url":"https://pratos.github.io/2017/03/07/pandas-indexing-confusion.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://pratos.github.io/feed.xml" title="prthamesh's blog" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">prthamesh&#39;s blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Pandas Indexing &amp; Selecting using iloc, loc and ix</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2017-03-07T00:00:00-06:00" itemprop="datePublished">
        Mar 7, 2017
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      7 min read
    
</span></p>

    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>In Pandas 19.02, the indexing follows the same paradigms as Numpy. There’s not much of a difference if a newbie starts to slice pandas <code class="language-plaintext highlighter-rouge">Dataframe</code> according to the numpy conventions. However, there comes a time when things take turn for the worse when he/she encounters the three musketeers: <code class="language-plaintext highlighter-rouge">iloc, loc and ix</code>.</p>

<p><img src="http://www.frostclick.com/wp/wp-content/uploads/2013/08/THREE-MUSKETEERS.jpg" alt="Three musketeers" />
<strong>Source: <a href="http://www.frostclick.com/wp/index.php/2013/08/21/alexandre-dumas-the-three-musketeers/">Frost Click: Three Musketeers</a></strong></p>

<p>Here’s to the many hours that I spent pulling out my hair in understanding this lot.</p>

<p>We’ll start with the basic definitions that Pandas documentation has to offer:</p>

<blockquote>
  <p>.loc is primarily label based, but may also be used with a boolean array. .loc will raise KeyError when the items are not found.</p>
</blockquote>

<blockquote>
  <p>.iloc is primarily integer position based (from 0 to length-1 of the axis), but may also be used with a boolean array. .iloc will raise IndexError if a requested indexer is out-of-bounds, except slice indexers which allow out-of-bounds indexing. (this conforms with python/numpy slice semantics).</p>
</blockquote>

<blockquote>
  <p>.ix supports mixed integer and label based access. It is primarily label based, but will fall back to integer positional access unless the corresponding axis is of integer type. .ix is the most general and will support any of the inputs in .loc and .iloc. .ix also supports floating point label schemes. .ix is exceptionally useful when dealing with mixed positional and label based hierarchical indexes.</p>
</blockquote>

<blockquote>
  <p>However, when an axis is integer based, ONLY label based access and not positional access is supported. Thus, in such cases, it’s usually better to be explicit and use .iloc or .loc.</p>
</blockquote>

<p>Hmmm, sounds too technical. Let’s take the help of code to understand these.</p>

<p>Consider a dataframe <code class="language-plaintext highlighter-rouge">df</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">5</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">'ABCDE'</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>84</td>
      <td>71</td>
      <td>64</td>
      <td>93</td>
      <td>65</td>
    </tr>
    <tr>
      <th>1</th>
      <td>87</td>
      <td>17</td>
      <td>12</td>
      <td>67</td>
      <td>80</td>
    </tr>
    <tr>
      <th>2</th>
      <td>45</td>
      <td>70</td>
      <td>12</td>
      <td>83</td>
      <td>90</td>
    </tr>
    <tr>
      <th>3</th>
      <td>56</td>
      <td>98</td>
      <td>5</td>
      <td>88</td>
      <td>90</td>
    </tr>
    <tr>
      <th>4</th>
      <td>31</td>
      <td>70</td>
      <td>98</td>
      <td>26</td>
      <td>33</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">shape</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(100, 5)
</code></pre></div></div>

<p>We’ll apply all the three on our dataset:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Selecting first three rows?
</span><span class="n">df</span><span class="p">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>84</td>
      <td>71</td>
      <td>64</td>
      <td>93</td>
      <td>65</td>
    </tr>
    <tr>
      <th>1</th>
      <td>87</td>
      <td>17</td>
      <td>12</td>
      <td>67</td>
      <td>80</td>
    </tr>
    <tr>
      <th>2</th>
      <td>45</td>
      <td>70</td>
      <td>12</td>
      <td>83</td>
      <td>90</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Selecting first three rows?
</span><span class="n">df</span><span class="p">.</span><span class="n">loc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>84</td>
      <td>71</td>
      <td>64</td>
      <td>93</td>
      <td>65</td>
    </tr>
    <tr>
      <th>1</th>
      <td>87</td>
      <td>17</td>
      <td>12</td>
      <td>67</td>
      <td>80</td>
    </tr>
    <tr>
      <th>2</th>
      <td>45</td>
      <td>70</td>
      <td>12</td>
      <td>83</td>
      <td>90</td>
    </tr>
    <tr>
      <th>3</th>
      <td>56</td>
      <td>98</td>
      <td>5</td>
      <td>88</td>
      <td>90</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Selecting first three rows?
</span><span class="n">df</span><span class="p">.</span><span class="n">ix</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>84</td>
      <td>71</td>
      <td>64</td>
      <td>93</td>
      <td>65</td>
    </tr>
    <tr>
      <th>1</th>
      <td>87</td>
      <td>17</td>
      <td>12</td>
      <td>67</td>
      <td>80</td>
    </tr>
    <tr>
      <th>2</th>
      <td>45</td>
      <td>70</td>
      <td>12</td>
      <td>83</td>
      <td>90</td>
    </tr>
    <tr>
      <th>3</th>
      <td>56</td>
      <td>98</td>
      <td>5</td>
      <td>88</td>
      <td>90</td>
    </tr>
  </tbody>
</table>
</div>

<p>Apart from <code class="language-plaintext highlighter-rouge">iloc</code>, the rest two don’t really follow the same that points out the first difference: <code class="language-plaintext highlighter-rouge">iloc</code> is integer based while the rest aren’t (Note: <code class="language-plaintext highlighter-rouge">loc</code> is exclusively label based, while <code class="language-plaintext highlighter-rouge">ix</code> plays the devil’s advocate).</p>

<p><code class="language-plaintext highlighter-rouge">loc</code> and <code class="language-plaintext highlighter-rouge">ix</code> select values till the index label <em>3</em> i.e. we get values of <em>[0,1,2,3]</em></p>

<p>Let’s correct the <code class="language-plaintext highlighter-rouge">loc</code> and <code class="language-plaintext highlighter-rouge">ix</code> to select <code class="language-plaintext highlighter-rouge">first 3 rows</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># since both behave as label based, let's write them as:
</span><span class="k">print</span> <span class="p">(</span><span class="s">"::::The output for loc::::"</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">loc</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
<span class="k">print</span> <span class="p">(</span><span class="s">"::::The output for ix::::"</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">ix</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>::::The output for loc::::
    A   B   C   D   E
0  84  71  64  93  65
1  87  17  12  67  80
2  45  70  12  83  90
::::The output for ix::::
    A   B   C   D   E
0  84  71  64  93  65
1  87  17  12  67  80
2  45  70  12  83  90
</code></pre></div></div>

<p>Now, the question arises why do we need <code class="language-plaintext highlighter-rouge">loc</code> or <code class="language-plaintext highlighter-rouge">ix</code> when the insanely simple <code class="language-plaintext highlighter-rouge">iloc</code> solves our problems?</p>

<p>Let’s consider the following scenario where we need to slice select columns from the dataframe using <code class="language-plaintext highlighter-rouge">iloc</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Selecting the column's [A,C] for the first 3 rows
</span><span class="n">df</span><span class="p">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'C'</span><span class="p">]]</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

&lt;ipython-input-9-2f83469716a2&gt; in &lt;module&gt;()
      1 # Selecting the column's [A,C] for the first 3 rows
----&gt; 2 df.iloc[:3, ['A', 'C']]


/home/pratos/miniconda3/lib/python3.5/site-packages/pandas/core/indexing.py in __getitem__(self, key)
   1308 
   1309         if type(key) is tuple:
-&gt; 1310             return self._getitem_tuple(key)
   1311         else:
   1312             return self._getitem_axis(key, axis=0)


/home/pratos/miniconda3/lib/python3.5/site-packages/pandas/core/indexing.py in _getitem_tuple(self, tup)
   1558     def _getitem_tuple(self, tup):
   1559 
-&gt; 1560         self._has_valid_tuple(tup)
   1561         try:
   1562             return self._getitem_lowerdim(tup)


/home/pratos/miniconda3/lib/python3.5/site-packages/pandas/core/indexing.py in _has_valid_tuple(self, key)
    149             if i &gt;= self.obj.ndim:
    150                 raise IndexingError('Too many indexers')
--&gt; 151             if not self._has_valid_type(k, i):
    152                 raise ValueError("Location based indexing can only have [%s] "
    153                                  "types" % self._valid_types)


/home/pratos/miniconda3/lib/python3.5/site-packages/pandas/core/indexing.py in _has_valid_type(self, key, axis)
   1528             return self._is_valid_integer(key, axis)
   1529         elif is_list_like_indexer(key):
-&gt; 1530             return self._is_valid_list_like(key, axis)
   1531         return False
   1532 


/home/pratos/miniconda3/lib/python3.5/site-packages/pandas/core/indexing.py in _is_valid_list_like(self, key, axis)
   1551         ax = self.obj._get_axis(axis)
   1552         l = len(ax)
-&gt; 1553         if len(arr) and (arr.max() &gt;= l or arr.min() &lt; -l):
   1554             raise IndexError("positional indexers are out-of-bounds")
   1555 


/home/pratos/miniconda3/lib/python3.5/site-packages/numpy/core/_methods.py in _amax(a, axis, out, keepdims)
     24 # small reductions
     25 def _amax(a, axis=None, out=None, keepdims=False):
---&gt; 26     return umr_maximum(a, axis, None, out, keepdims)
     27 
     28 def _amin(a, axis=None, out=None, keepdims=False):


TypeError: cannot perform reduce with flexible type
</code></pre></div></div>

<p><strong>Whoa! Up there’s a mess homie!</strong></p>

<p>Unlike numpy, pandas have a <code class="language-plaintext highlighter-rouge">label</code> based columns and there’s a need for a better control over selection of columns in a dataframe. <code class="language-plaintext highlighter-rouge">loc</code> provides that with it’s label based selection (sometimes if not used properly might leave the practitioner with a numb brain). Let’s see whether we can do that with <code class="language-plaintext highlighter-rouge">loc</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">loc</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'C'</span><span class="p">]]</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>84</td>
      <td>64</td>
    </tr>
    <tr>
      <th>1</th>
      <td>87</td>
      <td>12</td>
    </tr>
    <tr>
      <th>2</th>
      <td>45</td>
      <td>12</td>
    </tr>
  </tbody>
</table>
</div>

<p><strong>Note: <code class="language-plaintext highlighter-rouge">loc</code> includes last element, <code class="language-plaintext highlighter-rouge">iloc</code> doesn’t. So, the above behaviour while selecting rows explains that.</strong></p>

<p>Sweet! It seems <code class="language-plaintext highlighter-rouge">loc</code> is awesome! What about <code class="language-plaintext highlighter-rouge">ix</code>, would it be the same?</p>

<p><strong>Note: <code class="language-plaintext highlighter-rouge">ix</code> has a very dividing opinion, in the pandas documentation itself the maintainers point towards using <code class="language-plaintext highlighter-rouge">iloc</code> and <code class="language-plaintext highlighter-rouge">loc</code> whenever a sane dataframe is being presented. Just to avoid the confusion that prevails from mixture label based and integer based slicing.</strong></p>

<p>If <code class="language-plaintext highlighter-rouge">loc</code> is a <a href="https://en.wikipedia.org/wiki/Katana">Katana</a>, then <code class="language-plaintext highlighter-rouge">ix</code> is <a href="https://en.wikipedia.org/wiki/Iron_Age_sword">Iron aged double edged swords</a>. Let’s refer the documentation definition of <code class="language-plaintext highlighter-rouge">ix</code> again:</p>

<blockquote>
  <p>ix supports mixed integer and label based access. It is primarily label based, but will fall back to integer positional access unless the corresponding axis is of integer type. .ix is the most general and will support any of the inputs in .loc and .iloc. .ix also supports floating point label schemes. .ix is exceptionally useful when dealing with mixed positional and label based hierarchical indexes.</p>
</blockquote>

<p>The base behavior of <code class="language-plaintext highlighter-rouge">ix</code> is illustrated as below:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>A    56
B    98
C     5
D    88
E    90
Name: 3, dtype: int64
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">df.ix[3]</code> returns by default the value of the <em>3rd row</em>. <code class="language-plaintext highlighter-rouge">df.ix[3,]</code> would give the similar results.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">3</span><span class="p">,]</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>A    56
B    98
C     5
D    88
E    90
Name: 3, dtype: int64
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># A more "complex" query using ix
# Hybrid approach
</span><span class="n">df</span><span class="p">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'C'</span><span class="p">]]</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>87</td>
      <td>12</td>
    </tr>
    <tr>
      <th>2</th>
      <td>45</td>
      <td>12</td>
    </tr>
    <tr>
      <th>3</th>
      <td>56</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Selecting rows from 1 to 3, and columns 1 to 2
# Pure Index based
</span><span class="n">df</span><span class="p">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>17</td>
    </tr>
    <tr>
      <th>2</th>
      <td>70</td>
    </tr>
    <tr>
      <th>3</th>
      <td>98</td>
    </tr>
  </tbody>
</table>
</div>

<p>From the above two examples, we can understand how handy <code class="language-plaintext highlighter-rouge">ix</code>. Almost like being rescued by Gandalf himself with his sword, Glamdrig! (At least I felt like today 😊)</p>

<p><img src="http://www.cultjer.com/img/ug_photo/2013_11/BYKqJjNIYAA9SHL20131103223218.jpg" alt="Glamdring sword" />
<strong>Source: <a href="http://www.cultjer.com/gandalf-and-sword">Cultjer</a></strong></p>

<p>With all the small snippets, I hope the basic demons about our three musketeers are exorcised. A small real life dataset would help in getting a feel of the things.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">winered</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'winequality-red.csv'</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">';'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">winered</span><span class="p">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fixed acidity</th>
      <th>volatile acidity</th>
      <th>citric acid</th>
      <th>residual sugar</th>
      <th>chlorides</th>
      <th>free sulfur dioxide</th>
      <th>total sulfur dioxide</th>
      <th>density</th>
      <th>pH</th>
      <th>sulphates</th>
      <th>alcohol</th>
      <th>quality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7.4</td>
      <td>0.70</td>
      <td>0.00</td>
      <td>1.9</td>
      <td>0.076</td>
      <td>11.0</td>
      <td>34.0</td>
      <td>0.9978</td>
      <td>3.51</td>
      <td>0.56</td>
      <td>9.4</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7.8</td>
      <td>0.88</td>
      <td>0.00</td>
      <td>2.6</td>
      <td>0.098</td>
      <td>25.0</td>
      <td>67.0</td>
      <td>0.9968</td>
      <td>3.20</td>
      <td>0.68</td>
      <td>9.8</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7.8</td>
      <td>0.76</td>
      <td>0.04</td>
      <td>2.3</td>
      <td>0.092</td>
      <td>15.0</td>
      <td>54.0</td>
      <td>0.9970</td>
      <td>3.26</td>
      <td>0.65</td>
      <td>9.8</td>
      <td>5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11.2</td>
      <td>0.28</td>
      <td>0.56</td>
      <td>1.9</td>
      <td>0.075</td>
      <td>17.0</td>
      <td>60.0</td>
      <td>0.9980</td>
      <td>3.16</td>
      <td>0.58</td>
      <td>9.8</td>
      <td>6</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7.4</td>
      <td>0.70</td>
      <td>0.00</td>
      <td>1.9</td>
      <td>0.076</td>
      <td>11.0</td>
      <td>34.0</td>
      <td>0.9978</td>
      <td>3.51</td>
      <td>0.56</td>
      <td>9.4</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select pH scores having less than 3 with quality equal to 6
</span><span class="n">winered</span><span class="p">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">'pH'</span><span class="p">,</span> <span class="s">'quality'</span><span class="p">]].</span><span class="n">query</span><span class="p">(</span><span class="s">'pH &lt; 3 &amp; quality == 6'</span><span class="p">)</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pH</th>
      <th>quality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>86</th>
      <td>2.93</td>
      <td>6</td>
    </tr>
    <tr>
      <th>91</th>
      <td>2.93</td>
      <td>6</td>
    </tr>
    <tr>
      <th>464</th>
      <td>2.98</td>
      <td>6</td>
    </tr>
    <tr>
      <th>544</th>
      <td>2.86</td>
      <td>6</td>
    </tr>
    <tr>
      <th>614</th>
      <td>2.87</td>
      <td>6</td>
    </tr>
    <tr>
      <th>667</th>
      <td>2.94</td>
      <td>6</td>
    </tr>
    <tr>
      <th>669</th>
      <td>2.94</td>
      <td>6</td>
    </tr>
    <tr>
      <th>1017</th>
      <td>2.89</td>
      <td>6</td>
    </tr>
    <tr>
      <th>1018</th>
      <td>2.89</td>
      <td>6</td>
    </tr>
    <tr>
      <th>1319</th>
      <td>2.90</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>

<p>As the above query, we can go on with many such. Hope this has been helpful for the readers. Do comment and correct if any inconsistencies.</p>

<p><strong>Sources:</strong></p>

<ol>
  <li><a href="http://pandas.pydata.org/pandas-docs/version/0.14.0/indexing.html">Pandas: Indexing and Selecting</a></li>
  <li><a href="http://stackoverflow.com/questions/27667759/is-ix-always-better-than-loc-and-iloc-since-it-is-faster-and-supports-i">Is ix always better than loc and iloc?</a></li>
  <li><a href="https://github.com/pandas-dev/pandas/issues/6683">Must read Github issue on iloc, loc and ix</a></li>
</ol>

  </div><a class="u-url" href="/2017/03/07/pandas-indexing-confusion.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Collection of random stuff that I learn through building and fixing software</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/pratos" target="_blank" title="pratos"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/pratos_" target="_blank" title="pratos_"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
